<div class="sidebar full-sidebar">
  <div class="search">
    <input type="text" [(ngModel)]="searchQuery" placeholder="Search">
    <button (click)="handleSearch()"><i class="fas fa-search"></i></button>
  </div>
  <a href="/home"> <div class="menu-item">
    <i class="fas fa-home"></i> Home</div>
  </a>
  <a href="/cocktails"> <div class="menu-item">
  <i class="fas fa-compass"></i> Explore</div>
  </a>

  <a href="/profile-page">
  <div class="menu-item"><i class="fas fa-user"></i> Profile</div>
  </a>
</div>

<!-- Sidebar con solo icone (per schermi piccoli) -->
<div class="sidebar icon-sidebar">

  <!--HOME BUTTON-->
  <a href="/home" class="menu-item icon-link">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
    </svg>
  </a>

  <a href="/cocktails" class="menu-item icon-link">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="m20.893 13.393-1.135-1.135a2.252 2.252 0 0 1-.421-.585l-1.08-2.16a.414.414 0 0 0-.663-.107.827.827 0 0 1-.812.21l-1.273-.363a.89.89 0 0 0-.738 1.595l.587.39c.59.395.674 1.23.172 1.732l-.2.2c-.212.212-.33.498-.33.796v.41c0 .409-.11.809-.32 1.158l-1.315 2.191a2.11 2.11 0 0 1-1.81 1.025 1.055 1.055 0 0 1-1.055-1.055v-1.172c0-.92-.56-1.747-1.414-2.089l-.655-.261a2.25 2.25 0 0 1-1.383-2.46l.007-.042a2.25 2.25 0 0 1 .29-.787l.09-.15a2.25 2.25 0 0 1 2.37-1.048l1.178.236a1.125 1.125 0 0 0 1.302-.795l.208-.73a1.125 1.125 0 0 0-.578-1.315l-.665-.332-.091.091a2.25 2.25 0 0 1-1.591.659h-.18c-.249 0-.487.1-.662.274a.931.931 0 0 1-1.458-1.137l1.411-2.353a2.25 2.25 0 0 0 .286-.76m11.928 9.869A9 9 0 0 0 8.965 3.525m11.928 9.868A9 9 0 1 1 8.965 3.525" />
    </svg>
  </a>
    

  <a href="/profile-page" class="menu-item icon-link">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
    </svg>
  </a>

</div>

<div class =container>

<a href="/home" class="back-arrow" aria-label="Torna indietro">
  <div class="tiktok-container">
    <!-- Header -->
    <div class="tiktok-header">
      <div class="header-left"></div>
      <div class="header-right">
        <button mat-icon-button [matMenuTriggerFor]="menu">
          <mat-icon style="color:black">more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="logout()">
            <mat-icon>logout</mat-icon>
            <span>Logout</span>
          </button>
        </mat-menu>
      </div>
    </div>
  
    <!-- Main Content with Parallax -->
    <div class="main-content">
      <div class="parallax-background"
           [style.background-image]="'url(' + parallaxImage + ')'"
           [style.transform]="parallaxTransform"></div>
  
      <!-- Profile Content -->
      <div class="profile-transparent-content">
        <div *ngIf="isLoggedIn" class="profile-section">
          <!-- Profile Info -->
          <div class="profile-info">
            <div class="profile-pic-container">
              <img [src]="profileImage" alt="Profile" class="profile-pic">
              <div class="profile-verify">
                <mat-icon>verified</mat-icon>
              </div>
            </div>
            <div class="profile-name">
              <br>
              <br>
              <h3>{{username}}</h3>
            </div>
            <div class="stats-container">
              <div class="stat">
                <div class="stat-number">0</div>
                <div class="stat-label">Following</div>
              </div>
              <div class="stat">
                <div class="stat-number">0</div>
                <div class="stat-label">Followers</div>
              </div>
              <div class="stat">
                <div class="stat-number">{{likedCocktails.length}}</div>
                <div class="stat-label">Likes</div>
              </div>
            </div>
          </div>
  
          <!-- Bio -->
          <div class="profile-bio">
            <h2>{{Bio}}</h2>
            <a href="#" class="link">{{Bio_link}}</a>
          </div>
  
  
          <!-- Tab Bar -->
          <mat-tab-group (selectedTabChange)="onTabChange($event.index)" [selectedIndex]="getSelectedTabIndex()">
            <mat-tab label="Cocktails" class = "crazy-tab">
              <div *ngIf="myCocktails.length === 0" class="empty-state">
                <mat-icon class="empty-icon">local_bar</mat-icon>
                <h3>No cocktails yet</h3>
                <p>Create your first cocktail to get started!</p>
                <button mat-raised-button color="warn" class="create-btn">Create Cocktail</button>
              </div>
              <div *ngIf="myCocktails.length > 0" class="grid">
                <div class="grid-item" *ngFor="let cocktail of myCocktails">
                  <img [src]="cocktail.image || 'assets/default-cocktail.jpg'" [alt]="cocktail.name">
                  <div class="item-info">
                    <mat-icon>play_circle_filled</mat-icon>
                    <span>{{cocktail.likes || 0}}</span>
                  </div>
                </div>
              </div>
            </mat-tab>
  
            <mat-tab label="Liked">
              <div *ngIf="likedCocktails.length === 0" class="empty-state">
                <mat-icon class="empty-icon">favorite_border</mat-icon>
                <h3>No liked cocktails yet</h3>
                <p>Like some cocktails to see them here!</p>
                <button mat-raised-button color="warn" class="create-btn">Browse Cocktails</button>
              </div>
              <div *ngIf="likedCocktails.length > 0" class="grid">
                <div class="grid-item" *ngFor="let cocktail of likedCocktails">
                  <img [src]="cocktail.image || 'assets/default-cocktail.jpg'" [alt]="cocktail.name">
                  <div class="item-info">
                    <mat-icon>play_circle_filled</mat-icon>
                    <span>{{cocktail.likes || 0}}</span>
                  </div>
                </div>
              </div>
            </mat-tab>
  
            <mat-tab label="Friends">
              <h3>Your Friends</h3>
            </mat-tab>
          </mat-tab-group>
        </div>
  
        <!-- Not Logged In State -->
        <div *ngIf="!isLoggedIn" class="not-logged">
          <div class="not-logged-content">
            <mat-icon class="error-icon">lock</mat-icon>
            <h2>Private Account</h2>
            <p>Log in to view this profile</p>
            <button mat-raised-button class="login-btn" (click)="logout()">Log In</button>
          </div>
        </div>
      </div>
    </div>
    
  
    <!-- Footer -->
    <div class="profile-footer">
      <div class="footer-content">
        <p>Â© {{currentYear}} CocktailApp</p>
        <div class="footer-links">
          <a href="#">Privacy</a>
          <a href="#">Terms</a>
          <a href="#">Help</a>
        </div>
      </div>
    </div>
  </div>

  